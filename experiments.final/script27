#!/bin/bash
set -x
OUT=`pwd`/experiments.final/output27

#for psi in 2 3 ; do
#    for alpha in 0 0.4 0.8 1.2 1.6 2 2.4 2.8 3 ; do
for psi in 2 ; do
    for alpha in 0 ; do
      for batch in 20000 40000 ; do
	      npairs=4000 ; if [ $batch == 40000 ] ; then npairs=8000 ; fi
	OUTDIR=$OUT/f2_psi${psi}_alpha${alpha}_${batch}
	mkdir -p $OUTDIR
        for layers in "300_300_300_1" ; do
				    python biholoNN_train.py --seed 1234 \
				 --n_pairs $npairs \
				 --batch_size $batch \
				 --shuffle False \
		          	 --function "f2" \
				   --psi $psi \
                                     --alpha $alpha \
				 --layers $layers \
				 --load_model experiments.final/output24/f2_psi2_alpha0/$layers \
				 --save_dir $OUTDIR/ \
 				--save_name $layers \
				 --max_epochs 1000 \
				 --loss_func "weighted_MAPE" 
        done
      done
    done
done
